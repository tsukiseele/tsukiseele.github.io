(window.webpackJsonp=window.webpackJsonp||[]).push([[20,11],{343:function(e,t,r){},351:function(e,t,r){r(352)},352:function(e,t,r){"use strict";var n=r(3),l=r(75),o=r(135),c=r(230),m=r(229);n({target:"Promise",stat:!0},{allSettled:function(e){var t=this,r=o.f(t),n=r.resolve,h=r.reject,f=c((function(){var r=l(t.resolve),o=[],c=0,h=1;m(e,(function(e){var l=c++,m=!1;o.push(void 0),h++,r.call(t,e).then((function(e){m||(m=!0,o[l]={status:"fulfilled",value:e},--h||n(o))}),(function(e){m||(m=!0,o[l]={status:"rejected",reason:e},--h||n(o))}))})),--h||n(o)}));return f.error&&h(f.value),r.promise}})},353:function(e,t,r){"use strict";r(343)},363:function(e,t,r){},373:function(e,t,r){"use strict";r.r(t);var n=r(2),l=(r(49),r(228),r(7),r(24),r(351),r(35),r(36),r(37),r(76),{props:{items:{type:Array,default:function(){return[]}},imageKey:{type:String,default:null},itemWidth:{type:Number,default:250},gap:{type:Number,default:20},evenly:{type:Boolean,default:!1},maxColumn:{type:Number,default:null},height:{type:Number|String,default:null}},data:function(){return{column:null,resizeObserver:null,resizeTimer:null}},watch:{items:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$emit("load"),t.next=3,e.getImageSize();case 3:e.fall(),e.$emit("loaded");case 5:case"end":return t.stop()}}),t)})))()}},methods:{responsive:function(){this.$el&&this.fall()},fall:function(){var e=this,t=this.$el.offsetWidth;this.column=Math.floor((t-this.gap)/(this.itemWidth+this.gap)),this.column=this.maxColumn&&this.column>this.maxColumn?this.maxColumn:this.column||1;var r,n,l=this.evenly?(t-this.itemWidth*this.column)/(this.column+1):this.gap,o=this.evenly?l:(t-(this.itemWidth+l)*this.column+l)/2,c=this.$el.querySelectorAll(".list-item"),m=[];c.forEach((function(t,i){t.style.width=e.itemWidth+"px",t.style.height=e.items[i]._height;var c=t.offsetHeight;if(i<e.column)r=(e.itemWidth+l)*i+o,n=0,m.push(c);else{var h=Math.min.apply(Math,m),f=m.indexOf(h);r=(e.itemWidth+l)*f+o,n=h+l,m[f]=h+l+c}t.style.left=r+"px",t.style.top=n+"px"})),this.$el.style.height=this.height?this.height:Math.max.apply(Math,m)+"px"},getImageSize:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.allSettled(e.items.map((function(t){return new Promise((function(r){var img=new Image;img.src=e.imageKey?t[e.imageKey]:t.src,img.onload=img.onerror=function(e){img.width>0&&img.height>0&&(t._height=img.height),r({width:img.width,height:img.height})}}))})));case 2:case"end":return t.stop()}}),t)})))()},listenLayoutChanged:function(){var e=this;this.resizeObserver=new ResizeObserver((function(t){t&&t.length&&(e.resizeTimer&&clearTimeout(e.resizeTimer),e.resizeTimer=setTimeout((function(){e.responsive(),clearTimeout(e.resizeTimer),e.resizeTimer=null}),500))})),this.resizeObserver.observe(this.$el)}},mounted:function(){var e=this;this.$nextTick(Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getImageSize();case 2:e.fall();case 3:case"end":return t.stop()}}),t)})))),this.listenLayoutChanged()},beforeDestroy:function(){this.resizeObserver&&this.resizeObserver.disconnect()}}),o=(r(353),r(11)),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"simple-waterfall"},[e._t("header"),r("div",{staticClass:"list"},e._l(e.items,(function(t,n){return r("div",{key:n,staticClass:"list-item",on:{click:function(r){return e.$emit("click",t)}}},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageKey?t[e.imageKey]:t.src,expression:"imageKey ? item[imageKey] : item.src"}],staticClass:"list-item--image"}),e._t("default",null,{index:n,item:t})],2)})),0),e._t("footer")],2)}),[],!1,null,"26e8b3df",null);t.default=component.exports},383:function(e,t,r){"use strict";r(363)},396:function(e,t,r){"use strict";r.r(t);r(29),r(25),r(26),r(7),r(50),r(24),r(51);var n=r(2),l=r(15),o=(r(49),r(30));function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var h={data:function(){return{banner:{title:"相册",cover:null},imgsArr:[]}},computed:m(m({},Object(o.c)(["images"])),Object(o.b)(["isMobile"])),methods:{onItemClick:function(e){this.banner.cover=e.value.url}},fetch:function(e){return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.store,e.params,t.next=3,r.dispatch("images");case 3:case"end":return t.stop()}}),t)})))()},mounted:function(){}},f=(r(383),r(11)),component=Object(f.a)(h,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card",attrs:{id:"gallery"}},[r("div",{staticClass:"gallery-list"},[r("client-only",[r("s-simple-waterfall",{attrs:{items:e.images,imageKey:"url",itemWidth:e.isMobile?170:240,gap:e.isMobile?10:20,evenly:""},scopedSlots:e._u([{key:"default",fn:function(t){t.index;var n=t.item;return[r("span",[e._v(e._s(n.title))])]}}])})],1)],1)])}),[],!1,null,"8664b4a2",null);t.default=component.exports;installComponents(component,{SSimpleWaterfall:r(373).default})}}]);