import{o as l,c,a as o,b as g,f as m,t as h,i as b,_ as p,n as _,F as v,r as f,q as k,v as P,g as $,u as S}from"./entry.b10bc9cd.js";import{_ as x}from"./index.6b9f927e.js";import{_ as y}from"./index.b72f895e.js";const z={class:"post-item-inner"},I={key:0,class:"item-cover-box"},w={class:"item-info"},N={class:"item-title"},L={class:"item-preview"};function R(t,n,e,r,i,a){const u=x;return l(),c("div",{class:"post-item",onClick:n[0]||(n[0]=s=>t.$router.push(e.to)),style:b(t.backgroundColor)},[o("div",z,[e.cover?(l(),c("div",I,[g(u,{class:"item-cover",src:e.cover},null,8,["src"])])):m("",!0),o("div",w,[o("div",N,h(e.title),1),o("span",L,h(e.description),1)])])],4)}const A={props:{to:{type:String,default:null},title:{type:String,default:null},cover:{type:String,default:null},date:{type:String,default:null},labels:{type:Array,default:()=>[]},category:{type:Object,default:null},description:{type:String,default:null}},data:()=>({backgroundColor:null}),methods:{getColor(t){return new Promise((n,e)=>{const r=new ColorThief,i=new Image;i.crossOrigin="Anonymous",i.src=t,i.complete?n([r.getColor(i),...r.getPalette(i)]):(i.addEventListener("load",()=>n([r.getColor(i),...r.getPalette(i)])),i.addEventListener("error",()=>e("Image failed to load")))})}},async mounted(){}},B=p(A,[["render",R],["__scopeId","data-v-8a7258f9"]]),M={class:"pagination-wrap"},E={class:"pagination"},V={class:"pagination-dots"},D=["onClick"],F={class:"pagination-dots"},O={class:"pagination-loading"};function T(t,n,e,r,i,a){const u=y;return l(),c("div",M,[o("div",E,[o("div",{class:_(["pagination-prev",{disable:e.current==1}]),onClick:n[0]||(n[0]=s=>a.onClick(e.current-1))},[g(u,{name:"chevron_left"})],2),a.range.includes(1)?m("",!0):(l(),c(v,{key:0},[o("div",{class:_(["pagination-first",{disable:e.current==1}]),onClick:n[1]||(n[1]=s=>a.onClick(1))},"1",2),o("div",V,[g(u,{name:"more_horiz"})])],64)),(l(!0),c(v,null,f(a.range,s=>(l(),c("div",{class:_(["pagination-page",{active:s==e.current}]),key:s,onClick:d=>s==e.current?null:a.onClick(s)},h(s),11,D))),128)),a.range.includes(a.totalPaginationCount)?m("",!0):(l(),c(v,{key:1},[o("div",F,[g(u,{name:"more_horiz"})]),o("div",{class:_(["pagination-last",{disable:e.current==a.totalPaginationCount}]),onClick:n[2]||(n[2]=s=>a.onClick(a.totalPaginationCount))},h(a.totalPaginationCount),3)],64)),o("div",{class:_(["pagination-next",{disable:e.current==a.totalPaginationCount}]),onClick:n[3]||(n[3]=s=>a.onClick(e.current+1))},[g(u,{name:"chevron_right"})],2)]),k(o("div",O,null,512),[[P,e.loading]])])}const j={model:{prop:"current",event:"change"},props:{current:{type:Number,default:1},total:{type:Number,default:1},size:{type:Number,default:10},length:{type:Number,default:5},loading:{type:Boolean,default:!1}},computed:{totalPaginationCount(){return Math.ceil(this.total/this.size)},range(){const t=Math.ceil(parseInt(this.length/2));return this.totalPaginationCount<=this.length?this.getRange(1,this.totalPaginationCount):this.current<=t?this.getRange(1,this.length):this.current+t>=this.totalPaginationCount?this.getRange(this.totalPaginationCount-this.length+1,this.totalPaginationCount):this.getRange(this.current-t+(this.length%2?0:1),this.current+t)}},methods:{onClick(t){this.$emit("change",t)},getRange(t,n){const e=[];if(typeof t=="number"&&typeof n=="number")for(let r=t;r<=n;r++)e.push(r);return e}},components:{SIcon:y}},q=p(j,[["render",T],["__scopeId","data-v-77db1e0e"]]),G={id:"content"},H={id:"main"},J={class:"post"},K={key:0,class:"error"};function Q(t,n,e,r,i,a){const u=B,s=q;return l(),c("div",G,[o("main",H,[o("div",J,[t.error?(l(),c("div",K,h(t.error),1)):m("",!0),(l(!0),c(v,null,f(a.archive.items,(d,C)=>(l(),c("div",{class:"post-item-wrap",key:C},[g(u,{title:d.title,cover:d.cover.url,date:d.createAt,labels:d.labels,description:d.description,category:d.category,to:`/archives/${d.id||""}`},null,8,["title","cover","date","labels","description","category","to"])]))),128)),g(s,{class:"pagination",current:a.archive.page,total:a.archive.totalCount,size:t.$cfg.blog.paginationSize,length:t.length,onChange:a.onChange,loading:t.isLoading},null,8,["current","total","size","length","onChange","loading"])])])])}const U={data:()=>({error:null,length:5,isLoading:!1,avatar:"https://avatars.githubusercontent.com/u/28500231?v=4"}),computed:{scroll(){return this.$store.scroll},archive(){return this.$store.archive},labels(){return this.$store.labels},categorys(){return this.$store.categorys},isMobile(){return this.$store.isMobile}},methods:{async onChange(t){this.$router.push({params:{page:t}})}},setup(){const t=S(),n=$();t.$store.getArchives({page:n.params.page||"1",count:t.$cfg.blog.paginationSize}),t.$store.getLabels(),t.$store.getCategorys()}},Z=p(U,[["render",Q],["__scopeId","data-v-8fc58f8a"]]);export{Z as default};
