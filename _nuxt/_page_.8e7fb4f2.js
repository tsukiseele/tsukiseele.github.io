import{o as i,c as l,h as k,f as p,a as o,t as g,i as b,_ as v,b as _,F as m,r as y,n as h,q as x,v as S,g as $,u as P}from"./entry.7e27d559.js";import{_ as I}from"./index.64ff1a1c.js";import{_ as C}from"./index.72e62554.js";const z={class:"chip-text"};function w(t,n,e,c,r,a){const d=C;return i(),l("span",{class:"chip",style:b(`--color: ${e.color?e.color:"#566687"}`)},[e.icon?(i(),k(d,{key:0,class:"chip-icon",name:e.icon||"sell"},null,8,["name"])):p("",!0),o("span",z,g(e.text),1)],4)}const N={props:{icon:{type:String,default:null},text:{type:String,default:null},height:{type:String,default:null},color:{type:String,default:null}},data:()=>({}),methods:{}},A=v(N,[["render",w],["__scopeId","data-v-e9d17264"]]),L={key:0,class:"item-cover-box"},R={class:"item-info"},B={class:"item-title"},M={class:"item-preview"},E={class:"item-labels"},T={class:"item-label"};function V(t,n,e,c,r,a){const d=I,s=A;return i(),l("div",{class:"post-item",onClick:n[0]||(n[0]=u=>t.$router.push(e.to)),style:b(t.backgroundColor)},[e.cover?(i(),l("div",L,[_(d,{class:"item-cover",src:e.cover},null,8,["src"])])):p("",!0),o("div",R,[o("div",B,g(e.title),1),o("span",M,g(e.description),1),o("ul",E,[o("li",T,[_(s,{text:t.$util.formatTimeAgo(e.date),icon:"event_note"},null,8,["text"])]),(i(!0),l(m,null,y(e.labels,(u,f)=>(i(),l("li",{class:"item-label",key:f},[_(s,{text:u.name,icon:"sell"},null,8,["text"])]))),128))])])],4)}const D={props:{to:{type:String,default:null},title:{type:String,default:null},cover:{type:String,default:null},date:{type:String,default:null},labels:{type:Array,default:()=>[]},category:{type:Object,default:null},description:{type:String,default:null}},data:()=>({backgroundColor:null}),methods:{getColor(t){return new Promise((n,e)=>{const c=new ColorThief,r=new Image;r.crossOrigin="Anonymous",r.src=t,r.complete?n([c.getColor(r),...c.getPalette(r)]):(r.addEventListener("load",()=>n([c.getColor(r),...c.getPalette(r)])),r.addEventListener("error",()=>e("Image failed to load")))})}},async mounted(){}},F=v(D,[["render",V],["__scopeId","data-v-6de61496"]]),O={class:"pagination-wrap"},j={class:"pagination"},q={class:"pagination-dots"},G=["onClick"],H={class:"pagination-dots"},J={class:"pagination-loading"};function K(t,n,e,c,r,a){const d=C;return i(),l("div",O,[o("div",j,[o("div",{class:h(["pagination-prev",{disable:e.current==1}]),onClick:n[0]||(n[0]=s=>a.onClick(e.current-1))},[_(d,{name:"chevron_left"})],2),a.range.includes(1)?p("",!0):(i(),l(m,{key:0},[o("div",{class:h(["pagination-first",{disable:e.current==1}]),onClick:n[1]||(n[1]=s=>a.onClick(1))},"1",2),o("div",q,[_(d,{name:"more_horiz"})])],64)),(i(!0),l(m,null,y(a.range,s=>(i(),l("div",{class:h(["pagination-page",{active:s==e.current}]),key:s,onClick:u=>s==e.current?null:a.onClick(s)},g(s),11,G))),128)),a.range.includes(a.totalPaginationCount)?p("",!0):(i(),l(m,{key:1},[o("div",H,[_(d,{name:"more_horiz"})]),o("div",{class:h(["pagination-last",{disable:e.current==a.totalPaginationCount}]),onClick:n[2]||(n[2]=s=>a.onClick(a.totalPaginationCount))},g(a.totalPaginationCount),3)],64)),o("div",{class:h(["pagination-next",{disable:e.current==a.totalPaginationCount}]),onClick:n[3]||(n[3]=s=>a.onClick(e.current+1))},[_(d,{name:"chevron_right"})],2)]),x(o("div",J,null,512),[[S,e.loading]])])}const Q={model:{prop:"current",event:"change"},props:{current:{type:Number,default:1},total:{type:Number,default:1},size:{type:Number,default:10},length:{type:Number,default:5},loading:{type:Boolean,default:!1}},computed:{totalPaginationCount(){return Math.ceil(this.total/this.size)},range(){const t=Math.ceil(parseInt(this.length/2));return this.totalPaginationCount<=this.length?this.getRange(1,this.totalPaginationCount):this.current<=t?this.getRange(1,this.length):this.current+t>=this.totalPaginationCount?this.getRange(this.totalPaginationCount-this.length+1,this.totalPaginationCount):this.getRange(this.current-t+(this.length%2?0:1),this.current+t)}},methods:{onClick(t){this.$emit("change",t)},getRange(t,n){const e=[];if(typeof t=="number"&&typeof n=="number")for(let c=t;c<=n;c++)e.push(c);return e}},components:{SIcon:C}},U=v(Q,[["render",K],["__scopeId","data-v-77db1e0e"]]),W={id:"content"},X={id:"main"},Y={class:"post"},Z={key:0,class:"error"};function tt(t,n,e,c,r,a){const d=F,s=U;return i(),l("div",W,[o("main",X,[o("div",Y,[t.error?(i(),l("div",Z,g(t.error),1)):p("",!0),(i(!0),l(m,null,y(a.archive.items,(u,f)=>(i(),l("div",{class:"post-item-wrap",key:f},[_(d,{title:u.title,cover:u.cover.url,date:u.createAt,labels:u.labels,description:u.description,category:u.category,to:`/archives/${u.id||""}`,"data-aos":"fade-up"},null,8,["title","cover","date","labels","description","category","to"])]))),128)),_(s,{class:"pagination",current:a.archive.page,total:a.archive.totalCount,size:t.$cfg.blog.paginationSize,length:t.length,onChange:a.onChange,loading:t.isLoading},null,8,["current","total","size","length","onChange","loading"])])])])}const et={data:()=>({error:null,length:5,isLoading:!1,avatar:"https://avatars.githubusercontent.com/u/28500231?v=4"}),computed:{scroll(){return this.$store.scroll},archive(){return this.$store.archive},labels(){return this.$store.labels},categorys(){return this.$store.categorys},isMobile(){return this.$store.isMobile}},methods:{async onChange(t){this.$router.push({params:{page:t}})}},setup(){const t=P(),n=$();t.$store.getArchives({page:n.params.page||"1",count:t.$cfg.blog.paginationSize}),t.$store.getLabels(),t.$store.getCategorys()}},it=v(et,[["render",tt],["__scopeId","data-v-b15064d8"]]);export{it as default};
