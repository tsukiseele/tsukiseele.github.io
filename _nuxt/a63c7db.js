(window.webpackJsonp=window.webpackJsonp||[]).push([[22,12],{393:function(e,t,r){e.exports={}},401:function(e,t,r){r(402)},402:function(e,t,r){"use strict";var n=r(2),o=r(9),l=r(57),c=r(79),m=r(119),h=r(153);n({target:"Promise",stat:!0},{allSettled:function(e){var t=this,r=c.f(t),n=r.resolve,f=r.reject,d=m((function(){var r=l(t.resolve),c=[],m=0,f=1;h(e,(function(e){var l=m++,h=!1;f++,o(r,t,e).then((function(e){h||(h=!0,c[l]={status:"fulfilled",value:e},--f||n(c))}),(function(e){h||(h=!0,c[l]={status:"rejected",reason:e},--f||n(c))}))})),--f||n(c)}));return d.error&&f(d.value),r.promise}})},403:function(e,t,r){"use strict";r(393)},413:function(e,t,r){e.exports={}},424:function(e,t,r){"use strict";r.r(t);var n=r(5),o=(r(53),r(152),r(10),r(32),r(401),r(42),r(43),r(44),r(93),{props:{items:{type:Array,default:function(){return[]}},imageKey:{type:String,default:null},itemWidth:{type:Number,default:250},gap:{type:Number,default:20},evenly:{type:Boolean,default:!1},maxColumn:{type:Number,default:null},height:{type:Number|String,default:null}},data:function(){return{column:null,resizeObserver:null,resizeTimer:null}},watch:{items:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$emit("load"),t.next=3,e.getImageSize();case 3:e.fall(),e.$emit("loaded");case 5:case"end":return t.stop()}}),t)})))()}},methods:{responsive:function(){this.$el&&this.fall()},fall:function(){var e=this,t=this.$el.offsetWidth;this.column=Math.floor((t-this.gap)/(this.itemWidth+this.gap)),this.column=this.maxColumn&&this.column>this.maxColumn?this.maxColumn:this.column||1;var r,n,o=this.evenly?(t-this.itemWidth*this.column)/(this.column+1):this.gap,l=this.evenly?o:(t-(this.itemWidth+o)*this.column+o)/2,c=this.$el.querySelectorAll(".list-item"),m=[];c.forEach((function(t,i){t.style.width=e.itemWidth+"px",t.style.height=e.items[i]._height;var c=t.offsetHeight;if(i<e.column)r=(e.itemWidth+o)*i+l,n=0,m.push(c);else{var h=Math.min.apply(Math,m),f=m.indexOf(h);r=(e.itemWidth+o)*f+l,n=h+o,m[f]=h+o+c}t.style.left=r+"px",t.style.top=n+"px"})),this.$el.style.height=this.height?this.height:Math.max.apply(Math,m)+"px"},getImageSize:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.allSettled(e.items.map((function(t){return new Promise((function(r){var img=new Image;img.src=e.imageKey?t[e.imageKey]:t.src,img.onload=img.onerror=function(e){img.width>0&&img.height>0&&(t._height=img.height),r({width:img.width,height:img.height})}}))})));case 2:case"end":return t.stop()}}),t)})))()},listenLayoutChanged:function(){var e=this;this.resizeObserver=new ResizeObserver((function(t){t&&t.length&&(e.resizeTimer&&clearTimeout(e.resizeTimer),e.resizeTimer=setTimeout((function(){e.responsive(),clearTimeout(e.resizeTimer),e.resizeTimer=null}),500))})),this.resizeObserver.observe(this.$el)}},mounted:function(){var e=this;this.$nextTick(Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getImageSize();case 2:e.fall();case 3:case"end":return t.stop()}}),t)})))),this.listenLayoutChanged()},beforeDestroy:function(){this.resizeObserver&&this.resizeObserver.disconnect()}}),l=(r(403),r(21)),component=Object(l.a)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"simple-waterfall"},[e._t("header"),t("div",{staticClass:"list"},e._l(e.items,(function(r,n){return t("div",{key:n,staticClass:"list-item",on:{click:function(t){return e.$emit("click",r)}}},[t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageKey?r[e.imageKey]:r.src,expression:"imageKey ? item[imageKey] : item.src"}],staticClass:"list-item--image"}),e._t("default",null,{index:n,item:r})],2)})),0),e._t("footer")],2)}),[],!1,null,"26e8b3df",null);t.default=component.exports},434:function(e,t,r){"use strict";r(413)},448:function(e,t,r){"use strict";r.r(t);r(36),r(33),r(34),r(10),r(54),r(32),r(55);var n=r(5),o=r(22),l=(r(53),r(37));function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h={data:function(){return{banner:{title:"相册",cover:null},imgsArr:[]}},computed:m(m({},Object(l.c)(["images"])),Object(l.b)(["isMobile"])),methods:{onItemClick:function(e){this.banner.cover=e.value.url}},fetch:function(e){return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.store,e.params,t.next=3,r.dispatch("images");case 3:case"end":return t.stop()}}),t)})))()},mounted:function(){}},f=(r(434),r(21)),component=Object(f.a)(h,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"card",attrs:{id:"gallery"}},[t("div",{staticClass:"gallery-list"},[t("client-only",[t("s-simple-waterfall",{attrs:{items:e.images,imageKey:"url",itemWidth:e.isMobile?170:240,gap:e.isMobile?10:20,evenly:""},scopedSlots:e._u([{key:"default",fn:function(r){r.index;var n=r.item;return[t("span",[e._v(e._s(n.title))])]}}])})],1)],1)])}),[],!1,null,"8664b4a2",null);t.default=component.exports;installComponents(component,{SSimpleWaterfall:r(424).default})}}]);